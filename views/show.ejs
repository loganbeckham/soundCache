<!DOCTYPE html>
<html>
    <head>
        <%- include ('../partials/head.ejs') %>
    </head>
    <body>
        <%- include ('../partials/nav.ejs') %>
        <div class="container">
            <!-- <h1 class="title pt-3">My Collections</h1> -->
            <button class="btn btn-info p-2 mt-4 ml-3" style="min-width: 100px;" onclick="location.href='/create'">Add Collection</button>
                <div class="row">
                    <% for (let i = 0; i < Collection.length; i++) { console.log(Collection[0])%>
                        <div class="col-12 col-md-6 col-lg-4">
                            <div class="card border-primary my-4" style="min-width: 250px; max-width: 250px;">
                                <img src="<%= Collection[i].collectionImage %>" class="card-img-top">
                                <div class="card-body text-center" style="height: 175px">
                                    <h5 class="card-title pt-3"> <%= Collection[i].collectionName %></h5>
                                    <form action="/collections/<%= Collection[i].id%>?_method=DELETE" method="POST">
                                        <input class="btn btn-danger mb-3" type="submit" value="Delete Collection">
                                    </form>
                                    <button class="btn btn-primary mb-3" onclick="location.href='/<%=Collection[i]._id%>/edit'">Edit Collection</button>
                                </div>
                            </div>
                        </div>
                    <% 
                    console.log(Collection[i].collectionSamples)
                    }
                    %>
                </div>
            <!-- <h1 class="title pt3">My Samples</h1>
                <div class="row">
                    <% for (let i = 0; i < Sample.length; i++) { %>
                        <div class="col-12 col-md-6 col-lg-4">
                            <div class="card border-primary my-4" style="min-width: 350px">
                                <div class="card-body text-center" style="height: 175px">
                                    <h5 class="card-title pt3"> <%= Sample[i].name %> </h5>
                                    <audio controls src="<%= Sample[i].preview %>"></audio>
                                    <form action="/collections/<%= Sample[i].id%>?_method=DELETE" method="POST">
                                        <input class="btn btn-danger mb-3" type="submit" value="Delete Sample">
                                    </form>
                                </div>
                            </div>
                        </div>
                    <% } %>
                </div> -->
        </div>
    </body>
    <script>

        $(()=> {
            
            $('#navSearch').on('submit', (event) => {

                event.preventDefault();
                window.location.href = "/"

                // Variable to Store User Input in Search Box
                const userInput = $('input[type="text"]').val();
                console.log(userInput)
                
            })

            // Stop Audio When New One Plays [credit to HoRn on stackOverflow]
            document.addEventListener('play', function(e) {
            let audios = document.getElementsByTagName('audio');
    
                for (let i = 0; i < audios.length; i++) {
                    if (audios[i] != e.target) {
                        audios[i].pause();
                    }
                }

            }, true);
        });

    </script>
</html>